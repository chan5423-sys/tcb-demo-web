(window["webpackJsonptcb-web-demo"]=window["webpackJsonptcb-web-demo"]||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},15:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),c=a.n(s),i=(a(15),a(1)),l=a.n(i),u=a(2),o=a(5),m=a(6),d=a(8),p=a(7),g=a(9),h=(a(17),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).state={app:{},loginMsg:"",userId:"tcb00",errmsg:"",base64:"",base64Encoding:"",execTime:0,queryResult:"",queryTime:0},e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=window.tcb.init({env:"scf-920ksf"});e.auth(),this.setState({app:e})}},{key:"handleInputUserId",value:function(e){this.setState({userId:e.target.value})}},{key:"handleInputBase64",value:function(e){this.setState({base64:e.target.value})}},{key:"customLogin",value:function(){var e=this,t=this.state.userId;t||this.setState({userId:"tcb00"}),fetch("".concat("https://service-2rliije5-1252710547.ap-shanghai.apigateway.myqcloud.com/release/","?userId=").concat(t||"tcb00")).then(function(){var t=Object(u.a)(l.a.mark(function t(a){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),400!==a.status){t.next=3;break}throw new Error("".concat(a.status,": ").concat(a.statusText," \u83b7\u53d6 Ticket \u5931\u8d25\uff0c\u7528\u6237 Id \u4e0d\u7b26\u5408\u89c4\u5219"));case 3:if(429!==a.status){t.next=5;break}throw new Error("".concat(a.status,": ").concat(a.statusText," API rate limit exceeded"));case 5:return t.next=7,a.json();case 7:n=t.sent,e.state.app.auth().signInWithTicket(n.ticket).then(function(t){t&&t.credential&&t.credential.refreshToken&&e.setState({loginMsg:"\u767b\u5f55\u6210\u529f\uff01"})});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.setState({errmsg:t.message})})}},{key:"getBase64Encoding",value:function(){var e=this,t=this.state.base64;if(t){var a=Date.now();this.state.app.callFunction({name:"base64",data:{str:t}}).then(function(t){var n=Date.now();e.setState({execTime:n-a,base64Encoding:t.result.data})}).catch(function(t){e.setState({errmsg:t.message})})}else this.setState({errmsg:"Base64 \u5b57\u7b26\u4e32\u4e0d\u80fd\u4e3a\u7a7a\uff01"})}},{key:"queryDB",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a,n,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Date.now(),a=this.state.app.database(),n=a.collection("demo_web"),e.next=6,n.get();case 6:r=e.sent,s=Date.now(),this.setState({queryResult:r.data.map(function(e){return JSON.stringify(e)}).join(" /n "),queryTime:s-t}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.setState({errmsg:e.t0.message});case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=this;this.state.app.auth().signOut().then(function(t){e.setState({loginMsg:"\u6ce8\u9500\u767b\u5f55\u6210\u529f\uff01"})})}},{key:"renderFunction",value:function(){var e=this,t=this.state,a=t.base64Encoding,n=t.execTime;return r.a.createElement("div",null,r.a.createElement("h4",null,"Base64 \u7f16\u7801"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"userId"},"\u5b57\u7b26\u4e32\uff1a"),r.a.createElement("input",{type:"text",id:"userId",value:this.state.base64,onChange:function(t){return e.handleInputBase64(t)}}),r.a.createElement("button",{style:{marginLeft:"10px"},onClick:function(){return e.getBase64Encoding()}},"\u8ba1\u7b97")),r.a.createElement("div",{style:{marginTop:"10px"}},"\u7ed3\u679c\uff1a ",a),r.a.createElement("div",{style:{marginTop:"10px"}},"\u8017\u65f6\uff1a ",n," ms"))}},{key:"renderDataBase",value:function(){var e=this,t=this.state,a=t.queryResult,n=t.queryTime;return r.a.createElement("div",null,r.a.createElement("h4",null,"\u67e5\u8be2"),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.queryDB()}},"\u67e5\u8be2\u8bb0\u5f55")),r.a.createElement("div",{style:{marginTop:"10px"}},"\u7ed3\u679c\uff1a",r.a.createElement("br",null),a),r.a.createElement("div",{style:{marginTop:"10px"}},"\u8017\u65f6\uff1a ",n," ms"))}},{key:"renderCustomLogin",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",null,"\u81ea\u5b9a\u4e49\u767b\u5f55"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"userId"},"\u7528\u6237 Id\uff08\u5b57\u6bcd\u548c\u6570\u5b57\u7684\u7ec4\u5408\uff0c4-32 \u4f4d\uff09\uff1a"),r.a.createElement("input",{type:"text",id:"userId",value:this.state.userId,onChange:function(t){return e.handleInputUserId(t)}}),r.a.createElement("button",{style:{marginLeft:"10px"},onClick:function(){return e.customLogin()}},"\u767b\u5f55"),r.a.createElement("button",{style:{marginLeft:"10px"},onClick:function(){return e.logout()}},"\u6ce8\u9500\u767b\u5f55")),r.a.createElement("div",{style:{marginTop:"10px"}},this.state.loginMsg))}},{key:"render",value:function(){var e=this.state.errmsg;return r.a.createElement("div",{className:"app"},r.a.createElement("h3",null,"\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u57df\u540d\uff1atcb.dev"),r.a.createElement("div",{className:"err",style:{color:"red"}},e),r.a.createElement("div",{className:"categories"},r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"group-title text-lg text-bold"},"\u51fd\u6570"),r.a.createElement("div",{className:"group-content"},this.renderFunction())),r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"group-title text-lg text-bold"},"\u6570\u636e\u5e93"),r.a.createElement("div",{className:"group-content"},this.renderDataBase())),r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"group-title text-lg text-bold"},"\u5b58\u50a8"),r.a.createElement("div",{className:"group-content"})),r.a.createElement("div",{className:"group"},r.a.createElement("div",{className:"group-title text-lg text-bold"},"\u6388\u6743"),r.a.createElement("div",{className:"group-content"},this.renderCustomLogin()))))}}]),t}(r.a.Component));c.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.402e2074.chunk.js.map